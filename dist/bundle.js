(()=>{"use strict";!function(){async function e(){const e=await fetch("/all");try{const t=await e.json();document.getElementById("destination").innerText=t.location,document.getElementById("departure-date").innerText=t.date,document.getElementById("temp").innerText=`${Math.round(t.temp)}Â°F`,document.getElementById("weather-description").innerText=t.weather,document.getElementById("days-away").innerText=function(e){const t=new Date,n=new Date(e).getTime()-t.getTime();return Math.ceil(n/864e5)}(t.date)}catch(e){console.error("Error updating UI: ",e)}}document.getElementById("trip-form").addEventListener("submit",(function(t){t.preventDefault();const n=document.getElementById("location").value,r=document.getElementById("departure-date").value;n?async function(e,t){const n=await fetch("https://api.weatherbit.io/v2.0/current?city="+t+"&appid=e6e5cbc4674c4002b13a2069218f3f05");if(401!==n.status)try{const e=await n.json();if(e.main)return e;console.error("Error: Unable to retrieve weather data.")}catch(e){console.error("Error fetching weather data: ",e)}else console.error("Unauthorized: Please check your API key.")}(0,n).then((e=>{e&&e.main?async function(e="",t={}){const n=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{return await n.json()}catch(e){console.error("Error sending data: ",e)}}("/add",{location:n,date:r,temp:e.main.temp,weather:e.weather[0].description}):console.error("Failed to retrieve weather data.")})).then(e).catch((e=>console.log("Error: ",e))):alert("Please enter a location.")}))}()})();